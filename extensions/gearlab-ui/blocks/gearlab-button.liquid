
{{ 'tw-output.css' | asset_url | stylesheet_tag }}

{% form 'product' %}
<div id="gl-modal" class="hidden fixed inset-0 z-50 items-center justify-center bg-black bg-opacity-50">
  <!-- Modal container -->
  <div class="bg-white w-[90vw] h-[85vh] shadow-xl flex flex-col">
    <!-- Modal header -->
    <div class="flex items-center justify-between p-4 border-b">
      <h3 class="text-xl font-semibold text-gray-900">Gear Lab</h3>
      <button id="gl-modal-close" class="text-gray-400 hover:text-gray-500 focus:outline-none">
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <!-- Modal content (empty) -->
    <div class="flex-1 p-6 overflow-y-auto">
     
    <img id="modal-image" 
     src="{{ product.featured_image | image_url: '500x' }}" 
     alt="{{ product.title }}"
     width="500"
     height="500">

    </div>
    <!-- Modal footer -->
    <div class="p-4 border-t flex justify-end">
      <button id="gl-modal-confirm" class="px-4 py-2 bg-epik-yellow border-1 border-black text-black hover:bg-opacity-80" type="submit">Add to Cart
      </button>
    </div>
  </div>

</div>

<button id="gl-button" type="button" class="btn btn--full mb-3 bg-epik-yellow border-1 border-black text-black"
        data-product-handle="{{ product.handle }}"
        data-product-id="{{ product.id }}"
        data-product-title="{{ product.title }}"
        data-product-price="{{ product.variants[0].price }}"
        data-product-image="{{ product.featured_image.src }}">  
    <span>
        {{ block.settings.gl_button_title }}
    </span>
</button>
{% endform %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("gl-button").addEventListener("click", function () {
document.getElementById("gl-button").addEventListener("click", function () {
        // Retrieve product data from button
        const productId = this.dataset.productId;
        const productHandle = this.dataset.productHandle;
        const productTitle = this.dataset.productTitle;
        const productPrice = this.dataset.productPrice;
        const productImage = this.dataset.productImage;

        // Populate the modal with product details
        document.getElementById("modal-title").textContent = productTitle;
        document.getElementById("modal-price").textContent = `$${productPrice}`;
        document.getElementById("modal-image").src = productImage
      });

    // Open modal functionality  
      document.getElementById("gl-modal").classList.remove("hidden");
      document.getElementById("gl-modal").classList.add("flex");
    });

    // Close modal functionality
    document.getElementById("gl-modal-close").addEventListener("click", function () {
      document.getElementById("gl-modal").classList.add("hidden");
      document.getElementById("gl-modal").classList.remove("flex");
    });
  });
</script>


{% schema %}
{
"name": "Gear Lab Button",
"target": "section",
"settings": [
  {
    "type": "text",
    "id": "gl_button_title",
    "label": "Title",
    "default": "GEAR LAB"
  },
]
}
{% endschema %}